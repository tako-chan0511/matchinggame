# Matching Game 操作説明

以下、画面上の各操作（ボタンやタイルの動き）がどのような働きをするのか、順を追って説明します。はじめて遊ぶ方でも迷わないように、用語説明・ルール・操作手順をまとめました。

---

## 1. ゲーム開始後の初期画面

- 画面中央に **4×4 のタイル（16 枚）** が並んでいます（※デフォルトは4×4ですが、お好みでサイズを変えられます）。
- 画面上部には「Matching Game」のタイトルと、その下に操作用のボタンが並んでいます。
- さらに下に「ターン数」「ペア獲得数」が表示されています。
    - **ターン数**：タイルを2枚めくって（選んで）マッチ判定を行った回数をカウントします。
    - **ペア獲得数**：いままで正しくマッチ（同じ数字のペア）したタイルの数 ÷ 2 がここに表示されます。※4×4なら最大8ペアまで。
- 実際にタイルがグリッド（格子状）で並んでいます。最初はすべて裏向き（数字やイラストが見えない状態）です。

---

## 2. 使えるボタンの説明

### 2-1. 行数／列数 の設定フォーム（サイズ変更）
- 画面左上近くに「行数 (Rows)」「列数 (Cols)」を指定する入力欄があります。
- そこに2～10の整数を入力し、「設定反映」ボタンを押すと：
    - 行数 × 列数 の枚数分だけ、新しいタイル盤面が生成されます。
    - マッチング数などの状態（ターン数・ペア数）はすべてリセットされ、初期状態（裏向き全タイル）に戻ります。
    - ※行数 × 列数 が奇数のときはエラーになります。必ず偶数枚にしてください。

例：
- 5×4 = 20枚 → OK（偶数）
- 3×3 = 9枚 → NG（奇数）

### 2-2. 「シャッフル」ボタン
- 同じ行数 × 列数のまま、タイルをランダムに並び替えます。
- シャッフルを押すと：
    - いま並んでいるタイルすべてが一度裏向きに戻り、
    - 数字やイラストの順序が再度ランダムに入れ替わります。
    - ターン数は0にリセットされ、ペア獲得数もゼロになります。

※すでに2ペア取っていても、「シャッフル」を押せば再び“裏向き全タイル＋ペア数0”からスタートできます。

### 2-3. 「チラ見（Peek）」ボタン
- 裏向きのタイルをすべて一時的にめくって（表向きに）見せる機能です。
- 押すと：
    - マッチしていない（ペアになっていない）タイルはすべて表向きになり、数秒（デフォルトでは約1～2秒）だけ中身が見えたあとに再び裏向きに戻ります。
    - すでにマッチ済み（ペア完成）のタイルは常に表向きのままなので、そのまま変わりません。
- この間に、タイルの配置や数字・イラストを素早く記憶しておくことで、以降のめくり作業がスムーズになります。

---

## 3. タイルのめくり方とルール

- 裏向きタイルを1枚クリック → そのタイルが表向きになります。
- 続いて別の裏向きタイルをもう1枚クリック → そのタイルも表向きになります。
- 2枚とも表向きになった瞬間、**1ターン**とカウントされます（ターン数 +1）。

2枚のタイルを比較し：

- **同じ数字（または同じイラスト）**の場合：「ペア成立」
    - 両タイルは「マッチ済み」として色が変化し、今後クリックしても裏向きに戻りません。
    - ペア獲得数が+1されます。
- **異なる数字（または異なるイラスト）**の場合：「マッチ失敗」
    - 約0.5～1秒ほど両方を表向きのまま維持し、そのあと自動的に両方とも裏向きに戻ります。

ターンを重ねてペアを取り続け、すべてのタイルをペアにしたらゲームクリアです。

---

## 4. ステータスバーの見方

- **ターン数**  
    - 1ターンは「裏向きのタイルを2枚めくって表向きにし、マッチ判定が行われた」タイミング。
    - たとえば2枚めくってマッチ失敗しても、ターン数は1カウント。
    - その次にさらに2枚めくると、ターン数は2になります。

- **ペア獲得数**  
    - いままで成功したペアの数が表示されます。
    - 4×4の場合は最大8ペア（16枚）なので、クリア時には最終的に「8 / 8」となります。
    - 例：4×4で2ペアを取ったときは「2 / 8」と表示されます。

- **クリアメッセージ**  
    - すべてのタイルをペアにした瞬間、ステータスバーの下に「🎉 クリアしました！ 合計ターン数：○○ 🎉」と表示され、ゲーム終了を知らせます。

---

## 5. ゲーム全体の流れ（例）

1. ゲームを開くと、まず4×4のタイルがランダムに裏向きで並んでいます。
2. 右上の「シャッフル」を押すと、同じ4×4のまま全タイルを再度ランダムに並び替え、ターン数0／ペア0から始まります。
3. ある程度タイル位置を覚えたら「チラ見」を押すと、数秒だけすべて裏向きタイルを表向きにして配置を再確認できます。
4. 裏向きタイルをクリックして2枚めくり、数字やイラストが一致すればペア成立 → 緑色のまま固定。
5. 異なれば失敗 → 0.5～1秒後に再び裏向きに戻る。
6. ペア成立するたびに「ペア獲得数」が増え、2枚めくるたびに「ターン数」が1ずつ増えていきます。
7. すべてのタイルがペアになったら「クリアメッセージ」が表示され、最終ターン数でスコアを確認できます。
8. クリア後にまた「シャッフル」を押せば再度同じ4×4で別の配置が生成され、再チャレンジできます。
9. もっと多い枚数で遊びたい場合は、左上の「行数」「列数」を入力して「設定反映」→たとえば6×6にすると36枚（18ペア）で遊べます。

---

## 補足：よくある質問

**Q1. 途中で「サイズ変更」をすると、いままでのターン数やペア獲得数はどうなりますか？**  
→ すべてリセットされ、新しい盤面（行数 × 列数 枚数）でターン数＝0、ペア数＝0からスタートします。

**Q2. マッチ済みタイルをクリックしても大丈夫ですか？**  
→ マッチ済みのタイル（緑色）はすでに固定されているので、クリックしても何も起こりません。

**Q3. 最速でクリアするコツはありますか？**  
- 最初はランダムに裏返して、できるだけ多くの位置を覚える
- 「チラ見」で一気にすべてを確認してから、ターン数をなるべく少なくしてペアをまとめる
- クリア後のスコア（ターン数）が小さいほど上手、という指標になります。

**Q4. ペア獲得数が (rows × cols) / 2 より大きくなることはありますか？**  
→ いいえ。最大ペア数は (行数 × 列数) ÷ 2 です。以上を超えることはありません。

---

以上が Matching Game の基本操作説明です。  
ぜひまずは 4×4 で「どれだけ少ないターン数でクリアできるか」に挑戦してみてください。  
そのあと、慣れてきたらサイズを増やして難易度UPにもチャレンジしてみましょう！

---